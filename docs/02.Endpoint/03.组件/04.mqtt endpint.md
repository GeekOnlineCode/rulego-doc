---
title: MQTT Endpoint
article: false
author: 
  name: rulego
  link: https://github.com/rulego/rulego
date: 2023-09-13 15:30:25
permalink: /pages/2b0760/
---

## 创建MqttEndpoint

***Mqtt Endpoint*** 是一个用来创建和启动MQTT接收服务的类型，它可以订阅不同的主题来处理不同的消息。订阅主题使用[路由Router](/pages/45008b/) 定义。

你可以创建一个Mqtt类型的指针，并指定服务的地址和其他配置。

```go
mqttEndpoint := &Mqtt{
  Config: mqtt.Config{
      Server: "127.0.0.1:1883",
  },
}
```

你可以使用mqttEndpoint.AddInterceptors方法添加全局拦截器，用来进行权限校验等逻辑。

```go
mqttEndpoint.AddInterceptors(func(exchange *endpoint.Exchange) bool {
  //权限校验逻辑
  return true
})
```

你可以使用mqttEndpoint.AddRouter方法注册路由，这个方法接收一个Router类型的指针作为参数。

```go
_ = mqttEndpoint.AddRouter(router1)
```

你可以使用mqttEndpoint.Start方法启动服务。

```go
_ = mqttEndpoint.Start()
```

## 示例

以下是一些使用endpoint包的示例代码：       
[RestEndpoint](https://github.com/rulego/rulego/tree/main/examples/http_endpoint/http_endpoint.go)       
[MqttEndpoint](https://github.com/rulego/rulego/tree/main/endpoint/mqtt/mqtt_test.go)