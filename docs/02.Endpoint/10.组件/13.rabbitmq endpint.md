---
title: Rabbitmq Endpoint
article: false
author: 
  name: rulego
  link: https://github.com/rulego/rulego
date: 2023-11-08 22:52:33
permalink: /pages/c96eb6/
---

***Rabbitmq Endpoint*** <Badge text="v0.24.0+"/> 用来创建和启动Rabbitmq订阅服务，它可以订阅不同流名称数据，然后路由到不同规则链进行处理。

::: tip 
1. 该组件是扩展组件，需要引入额外的扩展库：[rulego-components](https://github.com/rulego/rulego-components)
:::

## Type

endpoint/rabbitmq

## 启动配置

| 字段           | 类型     | 说明                                                  | 默认值   |
|--------------|--------|-----------------------------------------------------|-------|
| server       | string | RabbitMQ服务器地址，示例：amqp://guest:guest@127.0.0.1:5672/ | 无     |
| exchange     | string | 交换机名称                                               | 无     |
| exchangeType | string | 交换机类型，可选值：direct, fanout, topic                     | 无     |
| durable      | bool   | 表示交换器是否持久化。如果设置为 true，即使消息服务器重启，交换器也会被保留。           | false |
| autoDelete   | bool   | 表示交换器是否自动删除。如果设置为 true，则当没有绑定的队列时，交换器会被自动删除。        | false |

## 响应

`exchange.Out.SetBody`响应之前，需要通过`exchange.Out.Headers()`或者`exchange.Out.Msg.Metadata`指定`responseTopic`参数，组件就会往指定的主题发送数据：

```go
exchange.Out.GetMsg().Metadata.PutValue("responseTopic", "device.msg.response")
// or
exchange.Out.Headers().Add("responseTopic", "device.msg.response")

exchange.Out.SetBody([]byte("ok"))
```

响应参数配置：

| 字段                        | 类型     | 是否必填 | 说明    | 默认值 |
|---------------------------|--------|------|-------|-----|
| responseTopic/responseKey | string | 是    | 响应Key | -   |
| responseExchange          | string | 是    | 响应交换机 | -   |


## 示例

以下是使用endpoint的示例代码：

- [RestEndpoint](https://github.com/rulego/rulego/tree/main/examples/http_endpoint/http_endpoint.go)
- [WebsocketEndpoint](https://github.com/rulego/rulego/tree/main/endpoint/websocket/websocket_test.go)
- [MqttEndpoint](https://github.com/rulego/rulego/tree/main/endpoint/mqtt/mqtt_test.go)
- [ScheduleEndpoint](https://github.com/rulego/rulego/tree/main/endpoint/schedule/schedule_test.go)
- [NetEndpoint](https://github.com/rulego/rulego-components/blob/main/endpoint/net/net_test.go)
- [KafkaEndpoint](https://github.com/rulego/rulego-components/blob/main/endpoint/kafka/kafka_test.go) （扩展组件库）